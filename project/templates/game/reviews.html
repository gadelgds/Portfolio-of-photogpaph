{% extends 'game/base.html' %}
{% load static %}

{% block title %}Отзывы клиентов{% endblock %}

{% block content %}
<h1>Отзывы наших клиентов</h1>

<!-- Сообщения (например, после отправки формы) -->
{% if messages %}
    {% for message in messages %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}

<!-- Раздел с отзывами -->
<div class="review-section">
    <h2>Что говорят наши клиенты</h2>
    
    {% if reviews %}
        {% for review in reviews %}
            <div class="review-card">
                <div class="review-header">
                    <span class="review-author">{{ review.author_name }}</span>
                    <span class="review-rating">
                        {{ review.rating }}/5
                    </span>
                </div>
                <div class="review-text">
                    {{ review.text }}
                </div>
                <div class="review-date">
                    {{ review.created_at|date:"d.m.Y в H:i" }}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="no-reviews">
            Пока нет отзывов. Будьте первым!
        </div>
    {% endif %}
</div>

<!-- Форма для добавления отзыва -->
<div class="form-section">
    <h2>Оставьте свой отзыв</h2>
    <p>Мы будем рады узнать ваше мнение о нашей работе!</p>
    
    <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="{{ form.author_name.id_for_label }}">{{ form.author_name.label }}</label>
            {{ form.author_name }}
            {% if form.author_name.errors %}
                <span class="form-error">{{ form.author_name.errors }}</span>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.email.id_for_label }}">{{ form.email.label }}</label>
            {{ form.email }}
            {% if form.email.errors %}
                <span class="form-error">{{ form.email.errors }}</span>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.rating.id_for_label }}">{{ form.rating.label }}</label>
            {{ form.rating }}
            {% if form.rating.errors %}
                <span class="form-error">{{ form.rating.errors }}</span>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.text.id_for_label }}">{{ form.text.label }}</label>
            {{ form.text }}
            {% if form.text.errors %}
                <span class="form-error">{{ form.text.errors }}</span>
            {% endif %}
        </div>
        
        <button type="submit" class="btn-submit">Отправить отзыв</button>
    </form>
    
    <p class="form-note">
        * Ваш отзыв появится на сайте после проверки модератором
    </p>
</div>

{% endblock %}
